(this["webpackJsonpanimal-classifier-client"]=this["webpackJsonpanimal-classifier-client"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(98),a(12)),l=a(81),s=a(140),m=a(163),p=a(164),u=a(165),d=a(54),g=a(52),f=a(53),h=a(143),b=a(144),v=a(37),E=a(51),y=Object(s.a)((function(e){return{appBar:{backgroundColor:"light"===e.palette.type?e.palette.primary.main:E.a[800]},title:{flexGrow:1,WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none","&::selection":{background:"none",color:"none"},"&::-moz-selection":{background:"none",color:"none"}}}})),j=function(e){var t=e.processing,a=e.reset,i=e.setPaletteType,c=y();return r.a.createElement(n.Fragment,null,r.a.createElement(h.a,{position:"fixed",className:c.appBar},r.a.createElement(b.a,null,r.a.createElement(v.a,{className:c.title,variant:"h6"},"Animal Classifier"),e.processing?r.a.createElement(xe,{processing:t,reset:a}):null,r.a.createElement(_,{setPaletteType:i}))),r.a.createElement(b.a,{style:{padding:0}}))},x=a(50),C=a(145),O=a(55),k=a(45),w=a.n(k),S=Object(s.a)((function(e){return{base:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderWidth:2,borderRadius:2,borderColor:"light"===e.palette.type?"#eee":"#535353",borderStyle:"dashed",backgroundColor:"light"===e.palette.type?"#fafafa":"#bdbdbd",color:"light"===e.palette.type?"#bdbdbd":"#fafafa",outline:"none",transition:"border .24s ease-in-out",width:"100%",flexGrow:1,textAlign:"center"},accept:{borderColor:e.palette.success.main,backgroundColor:"light"===e.palette.type?O.a[50]:O.a[100]},active:{borderColor:e.palette.primary.main},reject:{borderColor:e.palette.error.main,backgroundColor:"light"===e.palette.type?f.a[50]:f.a[100]},text:{fontSize:"2em",textAlign:"center"}}})),N=function(e){var t=S(),a=Object(n.useCallback)(e.handleImageUpload,[]),i=Object(x.a)({accept:"image/*",onDropAccepted:a}),c=i.getRootProps,o=i.getInputProps,l=i.isDragActive,s=i.isDragAccept,m=i.isDragReject,p=Object(n.useMemo)((function(){return s?t.accept:m?t.reject:l?t.active:""}),[s,t.accept,m,t.reject,l,t.active]);return r.a.createElement("div",c({className:w()(t.base,p)}),r.a.createElement("input",o({accept:"image/*",multiple:!1,onChange:function(t){return e.handleImageUpload(t.target.files)}})),r.a.createElement(C.a,{style:{fontSize:80}}),r.a.createElement("span",{className:t.text},"Upload an image of an animal"))},I=a(17),P=a(146),B=a(83),T=a(84),A=function(e){var t,a,i=(a=null===(t=e.image)||void 0===t?void 0:t.imageUrl,Object(s.a)((function(e){return{imageCanvas:Object(I.a)({flex:"0 1 50%",display:"flex",alignItems:"center",justifyContent:"center",outline:0,padding:e.spacing(2),borderColor:"transparent",borderStyle:"dashed",borderWidth:2,transition:"border .24s ease-in-out",marginRight:e.spacing(1),marginBottom:0,maxHeight:"100%",maxWidth:"calc(50% - ".concat(e.spacing(1),"px)")},e.breakpoints.down("md"),{marginRight:0,marginBottom:e.spacing(1),maxHeight:"50%",maxWidth:"100%"}),imagePreview:{width:"100%",height:"100%",background:a?"url('".concat(a,"')"):"none",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",display:"flex",alignItems:"flex-start",justifyContent:"flex-end"},accept:{borderColor:e.palette.success.main,backgroundColor:"light"===e.palette.type?O.a[50]:O.a[100]},active:{borderColor:e.palette.primary.main},reject:{borderColor:e.palette.error.main,backgroundColor:"light"===e.palette.type?f.a[50]:f.a[100]},uploadIcon:{fontSize:"2.1875rem"},uploadPath:{opacity:.75,fill:"light"===e.palette.type?e.palette.primary.light:"rgb(66,66,66)"}}})))(),c=Object(n.useState)(!1),l=Object(o.a)(c,2),m=l[0],p=l[1],u=e.processing,d=Object(n.useCallback)(e.handleImageUpload,[]),g=Object(x.a)({accept:"image/*",noClick:u,onDropAccepted:u?function(){}:d}),h=g.getRootProps,b=g.getInputProps,v=g.isDragActive,E=g.isDragAccept,y=g.isDragReject,j=Object(n.useMemo)((function(){return u&&v?i.reject:E?i.accept:y?i.reject:v?i.active:""}),[E,i.accept,y,i.reject,v,i.active,u]);return Object(n.useEffect)((function(){p((function(e){return!e}))}),[]),r.a.createElement(P.a,{in:m,timeout:1e3},r.a.createElement(B.a,Object.assign({elevation:3},h({className:w()(i.imageCanvas,j)})),r.a.createElement("input",b({accept:"image/*",multiple:!1,onChange:function(t){return e.handleImageUpload(t.target.files)}})),r.a.createElement("div",{className:i.imagePreview},!u&&r.a.createElement(T.a,{className:i.uploadIcon,focusable:!1,viewBox:"0 0 24 24"},r.a.createElement("path",{className:i.uploadPath,d:"M19.21 12.04l-1.53-.11-.3-1.5C16.88 7.86 14.62 6 12 6 9.94 6 8.08 7.14 7.12 8.96l-.5.95-1.07.11C3.53 10.24 2 11.95 2 14c0 2.21 1.79 4 4 4h13c1.65 0 3-1.35 3-3 0-1.55-1.22-2.86-2.79-2.96zm-5.76.96v3h-2.91v-3H8l4-4 4 4h-2.55z"}),r.a.createElement("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zM8 13h2.55v3h2.9v-3H16l-4-4z"})))))},D=a(18),z=a(167),U=a(148),R=a(150),W=a(151),F=a(152),L=a(153),M=a(154),G=a(155),H=a(168),K=a(149),$=[],q=["butterfly","cat","chicken","cow","dog","elephant","horse","sheep","spider","squirrel"],J={dog:"\ud83d\udc15",cat:"\ud83d\udc08",butterfly:"\ud83e\udd8b",chicken:"\ud83d\udc14",cow:"\ud83d\udc04",elephant:"\ud83d\udc18",horse:"\ud83d\udc0e",sheep:"\ud83d\udc11",spider:"\ud83d\udd77\ufe0f",squirrel:"\ud83d\udc3f\ufe0f"},Z=Object(s.a)((function(e){return{infoList:{width:320,paddingTop:8},message:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left"},animalSubheader:{backgroundColor:"light"===e.palette.type?"rgba(255,255,255,1)":"rgba(66,66,66,1)"},animal:{display:"flex",alignItems:"center",justifyContent:"space-between",color:"inherit",textDecoration:"none"},animalEmoji:{textAlign:"right"},animalText:{textTransform:"capitalize",flexGrow:1,color:"inherit"}}})),_=function(e){var t=Object(D.a)(),a=Z(),i=Object(n.useState)("dark"===t.palette.type),c=Object(o.a)(i,2),l=c[0],s=c[1],m=Object(n.useState)(null),p=Object(o.a)(m,2),u=p[0],d=p[1],g=e.setPaletteType,f=function(){return d(null)},h=Boolean(u),b=h?"info-popover":void 0;return r.a.createElement(n.Fragment,null,r.a.createElement(z.a,{title:"Info","aria-label":"info-tip"},r.a.createElement(U.a,{"aria-describedby":b,"aria-label":"info",onClick:function(e){return d(e.currentTarget)}},r.a.createElement(K.a,{style:{color:"#fff",fontSize:30}}))),r.a.createElement(R.a,{id:b,open:h,anchorEl:u,onClose:f,onDragEnter:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(W.a,{className:a.infoList,subheader:r.a.createElement("li",null)},r.a.createElement(F.a,{key:"info",className:a.message},r.a.createElement(v.a,{variant:"body1",gutterBottom:!0},"About"),r.a.createElement(v.a,{variant:"body2",gutterBottom:!0},r.a.createElement("span",null,"This project is made by Tarun Belani, under the guidance of Dr. Arunava Banerjee, for Fall 2020 Senior Project. Source code can be found ",r.a.createElement("a",{href:"https://github.com/tarunb12/animal-classifier",target:"_blank",rel:"noopener noreferrer"},"here"),"."))),r.a.createElement(L.a,null),r.a.createElement(M.a,{className:a.animalSubheader},"Supported Animals"),q.map((function(e){return r.a.createElement(F.a,{key:e,component:"a",target:"_blank",href:"https://en.wikipedia.org/wiki/".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),rel:"noopener noreferrer"},r.a.createElement(G.a,{primary:r.a.createElement("div",{className:a.animal},r.a.createElement("span",{className:a.animalText},e),r.a.createElement("span",{className:a.animalEmoji},J[e]))}))})),r.a.createElement(L.a,null),r.a.createElement(F.a,{key:"theme-toggle",className:a.animal},r.a.createElement("span",{className:a.animalText},"Dark Mode"),r.a.createElement(H.a,{checked:l,onChange:function(){s((function(e){var t=!e;return localStorage.setItem("dark",JSON.stringify(t)),g(t?"dark":"light"),!e}))}})))))},X=a(57),Y=a.n(X),Q=a(77),V=a(166),ee=a(156),te=a(78),ae=a.n(te),ne=function(e){var t=new RegExp("(?:(?:^|.*;*)".concat(e,"*=*([^;]*).*$)|^.*$"));return document.cookie.replace(t,"$1")},re=a(58),ie=a.n(re),ce=a(79),oe=a.n(ce),le=a(80),se=Object(s.a)((function(e){return{upload:{width:"100%",padding:0,marginTop:e.spacing(1)},locationField:{flexGrow:1,marginRight:"2%",overflow:"hidden"},main:Object(I.a)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",width:"100%",height:"100%",padding:"24px 24px 0"},e.breakpoints.down("sm"),{padding:"16px 16px 0"})}})),me=function(e){var t=se(),a=Object(n.useState)(""),i=Object(o.a)(a,2),c=i[0],l=i[1],s=e.processing,m=e.image,p=e.animalPrediction,u=e.breedPrediction,d=e.setProcessing,g=e.setImage,f=e.setAnimalPrediction,h=e.setBreedPrediction,v=e.reset,E=apigClientFactory.newClient({accessKey:"AKIA6GTCF4WRARARMBMW",secretKey:"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",region:"us-east-2",defaultAcceptType:"application/json",defaultContentType:"application/json"}),y=function(e){E.animalPost(void 0,{data:{image:e}},void 0).then((function(e){return e.data})).then((function(e){return e.prediction})).then((function(e){return{value:e.name,confidence:e.confidence}})).then(f).then((function(){return d(!1)})).catch(console.error)},j=function(e,t){!function(e,t){var a=new Image;a.onload=function(){return t(!1)},a.onerror=function(){return t(!0)},a.src=e}(e,(function(a){a?(l("URL must represent a valid image file."),g(void 0)):fetch(e).then((function(e){return e.blob()})).then((function(e){return[new File([e],"upload.png",e)]})).then(x(t))}))},x=function(e){return function(){var t=Object(Q.a)(Y.a.mark((function t(a){var n,r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:(n=a[0])&&(e?(d(!1),f(void 0),h(void 0)):v(),r=URL.createObjectURL(n),g({image:n,imageUrl:r}),d(!0),(new ae.a).compress([n],{size:.5,quality:1,maxWidth:256,maxHeight:256}).then((function(e){return e[0]})).then((function(e){return e.data})).then(y));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return r.a.createElement(n.Fragment,null,r.a.createElement("input",{accept:"image/*",style:{display:"none"},id:"upload-photo",name:"upload-photo",multiple:!1,type:"file",onChange:function(e){return x(!1)(e.target.files)},disabled:s}),r.a.createElement("div",{className:t.main},m?r.a.createElement(ge,{animalPrediction:p,breedPrediction:u,image:m,handleImageUpload:x(!0),processing:s}):r.a.createElement(N,{handleImageUpload:x(!1)}),r.a.createElement(b.a,{className:t.upload},r.a.createElement(V.a,{error:!!c,disabled:s,variant:"filled",className:t.locationField,label:c||"URL",onChange:function(e){var t=e.target.value;0===t.trim().length?l(""):!function(e){if(!e)return!1;var t=e.lastIndexOf("http");if(-1!==t&&(e=e.substring(t)),!oe()(e))return ie()(e);var a=Object(le.parse)(e).pathname;if(!a)return!1;var n=a.search(/[:?&]/);return-1!==n&&(a=a.substring(0,n)),!!ie()(a)||(/styles/i.test(a),!1)}(t)?l("URL must represent a valid image file."):(l(""),j(t,!0))}}),r.a.createElement("label",{htmlFor:"upload-photo"},r.a.createElement(ee.a,{variant:"contained",component:"span",disabled:s},"Browse")))))},pe=a(157),ue=function(e){var t,a,i=(t=e.isBreed,a=e.isBreedType,Object(s.a)((function(e){return{predictionContainer:Object(I.a)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",marginTop:t?e.spacing(1):void 0,marginBottom:t?void 0:e.spacing(1),marginLeft:e.spacing(1),marginRight:0,flex:"0 0 100%",height:a?"calc(50% - ".concat(e.spacing(1),"px)"):"100%",width:"100%",textTransform:"capitalize"},e.breakpoints.down("md"),{marginTop:e.spacing(1),marginBottom:0,marginLeft:t?e.spacing(1):0,marginRight:t?0:e.spacing(1),flex:a?"0 1 50%":"0 0 100%",height:"calc(100% - ".concat(e.spacing(1),"px)")}),labelContainer:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},confidenceContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%",padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1.5),"px")},label:Object(I.a)({},e.breakpoints.down("sm"),{fontSize:"2rem"}),confidence:{fontSize:"1rem",textDecorationLine:"underline",textDecorationStyle:"dotted"}}})))(),c=Object(n.useState)(!1),l=Object(o.a)(c,2),m=l[0],p=l[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),g=d[0],f=d[1],h=e.prediction;Object(n.useEffect)((function(){f((function(e){return!e}))}),[]);var b=void 0===h;return r.a.createElement(P.a,{in:g,timeout:1e3},r.a.createElement(B.a,{elevation:3,className:i.predictionContainer},r.a.createElement("div",{className:i.labelContainer},b?r.a.createElement(pe.a,{size:40}):r.a.createElement(v.a,{variant:"h3",className:i.label},"".concat(null===h||void 0===h?void 0:h.value," ".concat(J[null===h||void 0===h?void 0:h.value]||"")))),r.a.createElement("div",{className:i.confidenceContainer},h&&r.a.createElement(z.a,{open:m,onOpen:function(){return p(!0)},onClose:function(){return p(!1)},title:"Confidence","aria-label":"confidence-tip"},r.a.createElement("span",{className:i.confidence,onClick:function(){return p((function(e){return!e}))}},(100*h.confidence).toFixed(2),"%")))))},de=Object(s.a)((function(e){return{container:Object(I.a)({display:"flex",width:"100%",height:"100%",marginBottom:e.spacing(1)},e.breakpoints.down("md"),{flexDirection:"column"}),imageContainer:Object(I.a)({flex:"0 1 50%",height:"100%",width:"50%"},e.breakpoints.down("md"),{flex:"0 0 100%",height:"50%",width:"100%"}),resultContainer:Object(I.a)({flex:"0 1 50%",display:"flex",height:"100%",maxWidth:"calc(50% - ".concat(e.spacing(1),"px)"),flexWrap:"wrap",alignItems:"flex-start"},e.breakpoints.down("md"),{height:"calc(50% - ".concat(e.spacing(1),"px)"),maxWidth:"100%",flexWrap:"nowrap",alignItems:"normal"})}})),ge=function(e){var t=de(),a=e.animalPrediction,n=e.breedPrediction,i=!!a&&$.includes(a.value);return r.a.createElement("div",{className:t.container},r.a.createElement(A,{image:e.image,processing:e.processing,handleImageUpload:e.handleImageUpload}),r.a.createElement("div",{className:t.resultContainer},r.a.createElement(ue,{isBreedType:i,isBreed:!1,prediction:a}),i&&r.a.createElement(ue,{isBreedType:i,isBreed:!0,prediction:n})))},fe=a(169),he=a(159),be=a(160),ve=a(161),Ee=a(162),ye=a(158),je=Object(s.a)((function(e){return{yesButton:{color:e.palette.primary.main},noButton:{color:e.palette.error.main}}})),xe=function(e){var t=je(),a=Object(n.useState)(!1),i=Object(o.a)(a,2),c=i[0],l=i[1],s=e.processing,m=e.reset,p=function(){return l(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(z.a,{title:"Stop","aria-label":"stop-tip"},r.a.createElement(U.a,{"aria-label":"stop",onClick:function(){return l(!0)}},r.a.createElement(ye.a,{style:{color:"#fff",fontSize:30}}))),r.a.createElement(fe.a,{open:c&&s,onClose:p,"aria-labelledby":"stop-dialog-title","aria-describedby":"stop-dialog-description"},r.a.createElement(he.a,{id:"stop-dialog-title"},"Stop image prediction?"),r.a.createElement(be.a,null,r.a.createElement(ve.a,null,"Stop the prediction for the current image. You will need to re-upload the image to recieve a prediction.")),r.a.createElement(Ee.a,null,r.a.createElement(ee.a,{onClick:p,className:t.noButton,autoFocus:!0},"Disagree"),r.a.createElement(ee.a,{onClick:function(){m(),p()},className:t.yesButton},"Agree"))))},Ce=function(e){return Object(l.a)({palette:{type:e,primary:d.a,secondary:g.a,error:{main:f.a.A400}}})},Oe=Object(s.a)((function(){return{app:{height:"100%",margin:0,padding:0,border:0},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",position:"relative",height:"100%"}}})),ke=function(){var e=Oe(),t=Object(m.a)("@media (prefers-color-scheme: dark)"),a=ne("paletteType")?ne("paletteType"):t?"dark":"light",i=Object(n.useState)(a),c=Object(o.a)(i,2),l=c[0],s=c[1],d=Object(n.useState)(),g=Object(o.a)(d,2),f=g[0],h=g[1],b=Object(n.useState)(!1),v=Object(o.a)(b,2),E=v[0],y=v[1],x=Object(n.useState)(),C=Object(o.a)(x,2),O=C[0],k=C[1],w=Object(n.useState)(),S=Object(o.a)(w,2),N=S[0],I=S[1];Object(n.useEffect)((function(){var e,t,a;e="paletteType",t=l,document.cookie="".concat(e,"=").concat(t,";path=/;max-age=").concat(a||31536e3)}),[l]);var P=function(){y(!1),k(void 0),I(void 0),h(void 0)};return r.a.createElement(p.a,{theme:Ce(l)},r.a.createElement(u.a,null),r.a.createElement("div",{className:e.app},r.a.createElement("div",{className:e.content},r.a.createElement(j,{reset:P,processing:E,setPaletteType:s}),r.a.createElement(me,{processing:E,image:f,animalPrediction:O,breedPrediction:N,setProcessing:y,setImage:h,setAnimalPrediction:k,setBreedPrediction:I,reset:P}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,a){e.exports=a(112)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.05b551fa.chunk.js.map